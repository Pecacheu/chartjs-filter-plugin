//https://github.com/Pecacheu/chartjs-filter-plugin v1.1; MIT License
(()=>{function e(e){let a;try{a=e.options.plugins.filter}catch(t){}a&&a.enabled&&(a.extDiv||(a.extDiv=4),a.forceRedraw||(a.forceRedraw=25),a._ifr=1/a.forceRedraw,e.data.datasets.forEach(e=>{e.rawData=e.data}))}function a(e){let a=e.options.plugins.filter;if(a.enabled){if(e._x){let r=e._dr/(e._x.max-e._x.min);(r>a.forceRedraw||r<a._ifr)&&t(e)}else(e._x=e.getDatasetMeta(0).xScale)&&t(e)}else e._x=0}function t(e){let a=e.data.datasets,t=e._x.min,r=e._x.max;if(e._ds==t&&e._de==r)return;e._ds=t,e._de=r,e._dr=r-t;let i,n,f,d,l=e.options.plugins.filter,s=l.sameX,o=e._dr/l.extDiv;t-=o,r+=o,a.forEach((e,a)=>{if(o=e.rawData,!a||!s){for(n=o.length,f=0,d=n,i=0;i<n;++i)if(o[i].x>=t){f=i;break}for(i=n-1;i>0;--i)if(o[i].x<=r){d=i;break}}e.data=o.slice(f,d+1)}),e._dfr=1,l.debug&&(n=[],a.forEach(e=>n.push(e.data.length)),n=n.join(", "),console.log(`SPLICE ${a.length} scales to rng (${f} -> ${d}), len savings ${a[0].rawData.length} -> ${a[0]._data?a[0]._data.length:"NULL"} -> ${n}`))}function r(e){e._x&&!e._dfr&&t(e),e._dfr&&(e._dfr=0,e.update("none"))}Chart.register({id:"filter",install:e,afterDraw:a,afterRender:r})})();